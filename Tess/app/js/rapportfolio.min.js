function onError(n,t,i){showCustomError(n&&n!==null?n.status:i.status)}function showCustomError(n){var t=getCustomError(n);t&&showError(t)}function getCustomError(n){return customErrorCodes[n]}function showError(n,t){n&&n!=="Internal Server Error"&&n!=="Not Modified"&&n!=="notmodified"&&n!==""||(n="Er is iets misgegaan.");openSmallPopup(t||"Fout",n)}function isNative(){return typeof invokeCSharpAction=="function"}function loadAsync(n){$(n).each(function(n,t){(!$(this).parents(".hidden")||$(this).parents(".hidden").length<=0)&&(!$(this).parents(".invisible")||$(this).parents(".invisible").length<=0)&&($(t).addClass("loading"),$(t).load($(t).data("load-url")||$(t).data("reload-url"),function(n,i,r){r.status!==200&&$(t).html(n);$(t).removeClass("loading");$(t).parent().hasClass("todo-list")||$(t).parent().fadeTo(500,1);$(t).css("display","inherited").fadeTo(500,1);setTimeout(function(){initPopover();initTooltips();checkPosters();var n=$(t).data("post-load");if(n&&typeof window[n]=="function")try{window[n]()}catch(i){}loadAsync($(t).find("div[data-load-url]"));$(t).hasClass("picker-content")&&recreatePopover(".header_container")},100)}))});typeof initialzeClassTable=="function"&&initialzeClassTable()}function isTouch(){return"ontouchstart"in window}function initTooltips(){$(".tooltip").remove();isTouch()?($('[data-toggle="tooltip"].touch').tooltip({html:!0,trigger:"manual"}),$('[data-toggle="tooltip"].touch').click(function(){$(".tooltip").remove();$(this).tooltip("show")})):$('[data-toggle="tooltip"]').tooltip({html:!0});window.addEventListener("scroll",function(){$(".tooltip").remove()})}function goBack(n){setCookie(directionCookie,n?"backAndReload":"back",1);doBackAnimation&&($("#inner-content").removeClass("scene_element--fadeinleft"),$("#inner-content").removeClass("scene_element--fadeinright"),$("#inner-content").addClass("scene_element--fadeoutright"));setTimeout(function(){window.history.back()},100)}function onGoBack(){isNative()&&(window.location.href.includes("/start/overzicht")||window.location.href.includes("/start/notificaties"))?invokeCSharpAction("{ action:'kill' }"):window.history.back()}function htmlEncode(n){return $("<div/>").text(n).html()}function rotateImage(n,t,i,r,u,f){n.preventDefault();r=r+"&t="+(new Date).getTime();$(t).addClass("disabled");$(t).addClass("fa-spin");var e=$(t).parent(".file-approval");e&&e.attr("style","display:inline-block");$.post(i,function(n,i,r){r.status===200&&($(u).each(function(){var n=$(this).data("rotate"),t,i;(!n||n>=4)&&(n=0);$(this).data("rotate",++n);$(this).attr("data-rotated",n);t=Math.min($(this).height(),$(this).width())/Math.max($(this).height(),$(this).width())||1;$(this).data("scale")&&$(this).data("scale")!==1&&(t=1);$(this).data("scale",t);$(this).parents(".board").length>0?(i=t===1||$(this).width()>$(this).height()?0:$(this).height()>$(this).width()?$(this).height()/3:$(this).width()/3,$(this).attr("style","transform: translateY(-"+i+"px) scale("+t+") rotate("+n*90+"deg);")):$(this).attr("style","transform: scale("+t+") rotate("+n*90+"deg);")}),$(".large-"+f).val($(".large-"+f).first().val()+"&t="+(new Date).getTime()),typeof initializeImages=="function"&&initializeImages());$(t).removeClass("disabled");$(t).removeClass("fa-spin");e&&e.removeAttr("style")}).fail(function(){$(t).removeClass("disabled");$(t).removeClass("fa-spin");e&&e.removeAttr("style")});n.stopPropagation()}function onLoading(n){var t=$("."+n).filter(":parents(.thumb)").parent().addClass("video-loading")}function onResumed(n){$("."+n).parent().removeClass("video-loading");var t=$("."+n).filter(":parents(.thumb)").attr("poster","")}function checkPosters(n){$("video:not(.checked-poster)").each(function(){checkPoster($(this),n)});[].forEach.call(document.querySelectorAll("img[data-src]"),function(n){n.onerror=function(){n.removeAttribute("data-src");$(n).addClass("broken");$(n).hasClass("video")&&$(n).parent().children(".processing").css("display","inherit")};n.onload=function(){n.removeAttribute("data-src")};n.setAttribute("src",n.getAttribute("data-src"))})}function checkPoster(n,t){var r=n.prop("poster"),i;r&&(n.addClass("checked-poster"),i=new Image,i.onerror=function(){n.parent().children(".processing").css("display","inherit");n.parent().children("img").removeAttr("src")},i.onload=function(){t&&t()},i.src=r);n.on("error",function(){$(this).removeAttr("controls")})}function markSeenClick(n,t,i,r){n.stopPropagation();$(t).hasClass("markable")&&markSeen(t,i,r)}function markSeen(n,t,i,r){t&&t.length?$.post(url_Unseen_MarkSeen,{unseenIds:t},function(u,f,e){var s,o,h;if((e.status===200||e.status===304)&&(s=t.length,n&&$(n).length&&($(n).removeClass("markable"),recalculate($(n),s),i=$(n).data("groups"),$(n).data("unseenids","")),i))for(o=0,h=i.length;o<h;o++)$("."+i[o]).each(function(){recalculate($(this),s,i[o])});r&&r()}):r&&r()}function recalculate(n,t,i){var f=$(n).data("count"),r,u;$(n).removeClass("unseen-"+f);r=f-t;$(n).children(".unseen").html(r);$(n).addClass("unseen-"+r);$(n).data("count",r);u=$(n).data("markable-count");u>0&&r<=u&&!$(n).hasClass("markable")&&($(n).addClass("markable"),instantMarkSeen($(n)));i&&i.startsWith("uid-")&&$(n).removeClass(i)}function markItemSeen(n){if(n&&n.length){var t=$("#"+n).data("unseenids"),i=$("#"+n).data("groups");markSeen($("#"+n),t,i)}}function markItemSeenSelector(n){n&&n.length&&document.querySelectorAll(n).forEach(n=>{var t=$(n).data("unseenids"),i=$(n).data("groups");markSeen($(n),t,i)})}function instantMarkAllSeen(){var n=[];$(".instant-markable:not(.seen)").each(function(){(!$(this).parents(".hidden")||$(this).parents(".hidden").length<=0)&&(!$(this).parents(".invisible")||$(this).parents(".invisible").length<=0)&&(!$(this).parents(".p1")||$(this).parents(".p1").length<=0)&&(!$(this).parents(".f1")||$(this).parents(".f1").length<=0)&&(!$(this).parents(".c1")||$(this).parents(".c1").length<=0)&&(n.push($(this)),$(this).addClass("seen"))});instantMarkElementsSeen(n)}function instantMarkElementsSeen(n){var t=[];$(n).each(function(){t=t.concat($(this).data("unseenids"))});t&&t.length&&$.post(url_Unseen_MarkSeen,{unseenIds:t},function(t,i,r){r.status===200&&$(n).each(function(){var n,i,t,r;if($(this).attr("data-unseenids",""),n=null,i=1,$(this)&&$(this).length)try{i=$(this).data("unseenIds").length}catch(u){}if($(this)&&$(this).length&&(n=$(this).data("groups")),n)for(t=0,r=n.length;t<r;t++)$("."+n[t]).each(function(){recalculate($(this),i,n[t])})})})}function instantMarkSeen(n){instantMarkElementsSeen([n])}function instantMarkSeenBtn(n){var t=$(n).data("unseenids");t&&t.length&&$.post(url_Unseen_MarkSeen,{unseenIds:t},function(t,i,r){r.status===200&&$(n).parents(".markseen-remove").remove()})}function onModalClose(){$(".popup-body .markable").each(function(){var n=$(this).data("unseenids"),t=$(this).data("groups");markSeen($(this),n,t)})}function closePopupMarkSeen(){$(".popup-body .markable").each(function(){var n=$(this).data("unseenids"),t=$(this).data("groups");markSeen($(this),n,t)});closePopup();abortUploads()}function markableEachSeen(n){$(n).each(function(){var i=$(this).data("count"),t=$(this).data("groups"),n,r;if(t&&i>0)for(n=0,r=t.length;n<r;n++)$("."+t[n]).each(function(){recalculate($(this),i,t[n])})})}function abortUploads(){try{$.each(abortables,function(n,t){try{t.readyState<4&&t.abort()}catch(i){}});abortables=[]}catch(n){}}function printHtml(event, this){hidePopover();window.print()}function logoff(n,t){n.preventDefault();n.stopPropagation();onLogoff();$(t).find("form").submit()}function onLogoff(){isNative()&&invokeCSharpAction('{ action: "deleteCredentials" }')}function showImageModal(n,t,i){var u=$("#large-"+i).val(),e,f,r;if(u&&u.length)if(n.preventDefault(),openLargePopup("",$("#"+t).html(),null,"popup-img"),u&&u.length)e=$(".popup-img").find("img"),$(e).attr("src",u);else if(f=$("#video-"+i),f&&f.length){checkPoster($(".popup-body video"));checkPosters();r=$(modal).find("video");$(r).attr("width","550");$(r).attr("height","550");$(r).prop("controls",!0);$(r).attr("poster",$("#largeposter-"+i).val());$(r).find("source").attr("src",$("#largevideo-"+i).val());try{$(r)[0].play()}catch(o){}}}function downloadURI(n,t){var i=document.createElement("a");i.download=t;i.href=n;i.click()}function selectAll(n,t){var i=$(n).prop("checked");$(t).prop("checked",i)}function keyboardAccess(n,t,i){(n.which===13||n.which===32)&&(i?$(t).find(i).click():$(t).click())}function fakeSpinner(n,t){var u=$(t).find("i").attr("class"),i,r;$(t).find("i").removeClass(u);$(t).find("i").addClass("fas fa-spinner fa-spin");i="";$(t).hasClass("dropdown-item")&&(r=$(t).closest(".btn-group").find(".dropdown-toggle"),i=r.html(),r.html(i+"<i class='fas fa-spinner fa-spin'><\/i>"),r.addClass("btn-loading"));setTimeout(function(){if($(t).find("i").removeClass("fas fa-spinner fa-spin"),$(t).find("i").addClass(u),$(t).hasClass("dropdown-item")){var n=$(t).closest(".btn-group").find(".dropdown-toggle");n.html(i);n.removeClass("btn-loading")}hidePopover()},3e3)}function showGallery(n,t,i){n.preventDefault();currentGalleryId=i;openPopupTarget(url_home_gallery,function(){checkPoster($(".popup-body video"));checkPosters();initTooltips()},"Galerij")}function chooseGalleryFile(n,t,i){var o,u,f,s,h,r,c,l,e;n.preventDefault();n.stopPropagation();$(currentGalleryId).val(i);o=$(currentGalleryId).closest(".gallery-container").find('input[type="file"]');o.val("");u=$(currentGalleryId).closest(".gallery-container").find(".uploadResult");u.removeAttr("src");u.addClass("hidden");f=$(currentGalleryId).closest(".gallery-container").find(".choosePicture");f.html('<span class="fas fa-spinner fa-spin"><\/span>');s=$(currentGalleryId).closest(".gallery-container").find(".nopreview");s.addClass("hidden");h=$(currentGalleryId).closest(".gallery-container").find(".default-wrapper");h.addClass("hidden");r=$(currentGalleryId).closest(".gallery-container").find(".gallerypreview");r.addClass("hidden");c=$(currentGalleryId).closest(".gallery-container").find("#dropZone .file-preview-wrapper-container");c.addClass("hidden");l=$(currentGalleryId).closest(".gallery-container").find("#GalleryFileDescription");l.val($("#gallery-description"+i).val());f.addClass("hidden");r.removeClass("hidden");e=$("#gallery-"+i).find("img").attr("src");r.html('<img class="bg-img uploadResult" src="'+e+'"><img class="fg-img preview main"  src="'+e+'">');closePopup();$(currentGalleryId).closest(".gallery-container").find(".uploadDiv").css({opacity:.3});$(currentGalleryId).closest(".gallery-container").find(".submitBtn").removeClass("disabled");$(currentGalleryId).closest(".gallery-container").find(".submitBtn").html('Opslaan <span class="fa fa-save"><\/span>');$(currentGalleryId).closest(".gallery-container").find("#uploadResultContainer").addClass("hidden");$(currentGalleryId).hasClass("auto-save")&&typeof saveFile=="function"&&saveFile(null,$(currentGalleryId).closest(".file-container").find(".submitBtn.btn-file"))}function onSkillsPageEdited(){var n=$(".on-page-edited");n&&n.length&&(n.removeClass("hidden"),$(".btn-print").addClass("disabled"))}function initSelect(){$("select.selectpicker").selectpicker({maxOptions:1,noneSelectedText:"Niets geselecteerd",liveSearch:!0,selectAllText:"Alles selecteren",deselectAllText:"Alles deselecteren",noneResultsText:"{0} niet gevonden",virtualScroll:!1});$("select.multiselectpicker").selectpicker({maxOptions:1e4,noneSelectedText:"Niets geselecteerd",liveSearch:!0,selectAllText:"Alles selecteren",deselectAllText:"Alles deselecteren",noneResultsText:"{0} niet gevonden",virtualScroll:!1})}function initDateTimePicker(){var t=document.querySelectorAll(".datepicker"),n;t.forEach(n=>{var i=new tempusDominus.TempusDominus(n,{display:{components:{date:!0,decades:!0,month:!0,year:!0,hours:!1,minutes:!1,seconds:!1}}}),t,r;i.dates.formatInput=n=>moment(n).format("DD-MM-YYYY");t=n.querySelector("input").getAttribute("value");t&&t.length&&(r=moment(t,"DD-MM-YYYY").toDate(),i.dates.setValue(tempusDominus.DateTime.convert(r)))});n=document.querySelectorAll(".datetimepicker");n.forEach(n=>{var i=new tempusDominus.TempusDominus(n,{display:{components:{date:!0,decades:!0,month:!0,year:!0,hours:!0,minutes:!0,seconds:!1}}}),t,r;i.dates.formatInput=n=>moment(n).format("DD-MM-YYYY HH:mm");t=n.querySelector("input").getAttribute("value");t&&t.length&&(r=moment(t,"DD-MM-YYYY HH:mm").toDate(),i.dates.setValue(tempusDominus.DateTime.convert(r)))})}function initTableWrapper(){setTimeout(function(){for(var t,r,u,f=document.querySelectorAll(".table-wrapper:not(.no-grab)"),i=0,n;n=f[i];i++)if(t=!1,n){$(n).on("mousedown",function(n){t=!0;this.classList.add("active");r=n.pageX-this.offsetLeft;u=this.scrollLeft});$(n).on("mouseleave",function(){t=!1;this.classList.remove("active")});$(n).on("mouseup",function(){t=!1;this.classList.remove("active")});$(n).on("mousemove",function(n){if(t){n.preventDefault();const i=n.pageX-this.offsetLeft,f=i-r;this.scrollLeft=u-f}})}},1e3)}function onClassBtnClick(n){document.querySelectorAll(".class-area").forEach(n=>n.classList.add("hidden"));document.querySelectorAll(".class-area-"+n).forEach(n=>n.classList.remove("hidden"));document.querySelectorAll(".class-btn").forEach(n=>n.classList.remove("active"));document.querySelectorAll(".class-btn-"+n).forEach(n=>n.classList.add("active"));updatePopover()}function pickClass(n,t,i){pick(url_Student_SetSelectedClass,n,t,i,async function(){await reloadComponents()})}function pickStudent(n,t,i){pick(url_Student_SetSelectedStudent,n,t,i,async function(){await reloadComponents()})}function pick(n,t,i,r,u){try{abortUploads()}catch(f){}updateNotifications(t);hidePopover();$.post(n,{id:t},function(n,t,f){try{abortUploads()}catch(e){}f.status===200&&(document.getElementById("picker-name").innerHTML=i,document.getElementById("picker-img").setAttribute("src",r));u()})}function updateNotifications(n){$(".unseen-wrapper:not(.student-sum)").addClass("hidden");$(".unseen-wrapper-"+n).removeClass("hidden")}function toggleRole(n,t,i,r){try{abortUploads()}catch(n){}$.post(url_Student_ToggleRole,{role:i},async function(n,i,u){u.status===200&&($(t).parents("li").find(".check").removeClass("check"),$(t).addClass("check"),$(".role-notification").html(r),setTimeout(await onRoleToggled,250))})}async function onRoleToggled(){hidePopover();loadAsync("#picker div[data-load-url]");recreatePopover(".header_container");await reloadComponents()}var customErrorCodes={},abortables,directionCookie,currentGalleryId;customErrorCodes[304]="Er is iets misgegaan";customErrorCodes[500]="Er is iets misgegaan";customErrorCodes[399]="Er is geen kind geselecteerd";customErrorCodes[398]="Er is geen bestand geselecteerd";customErrorCodes[397]="Niet alle kinderen zijn succesvol verwijderd";customErrorCodes[396]="Het gekozen bestandstype wordt niet ondersteund. De ondersteunde bestandstypen zijn bmp, gif, jpeg, jpg, png, pdf, doc, docx, ppt, pptx, xls, xlsx, mp4, mov, mp3, ogg, wav, m4a en aac";customErrorCodes[395]="Er zijn geen categorieën geselecteerd";customErrorCodes[494]="Kind(eren) is/zijn niet gevonden";customErrorCodes[493]="Het bestand is niet gevonden";customErrorCodes[392]="Je hebt het maximaal aantal favorieten bereikt, verwijder een bestand van je favorieten om er een toe te kunnen voegen";customErrorCodes[491]="Voor het inleveren van een format wordt een excel document verwacht";customErrorCodes[394]="Er is iets misgegaan bij het opslaan van het antwoord, neem contact op met een bevoegde";customErrorCodes[393]="Niet alle (verplichte) vragen zijn beantwoord";customErrorCodes[488]="Het kind is niet gevonden";customErrorCodes[487]="Je hebt geen rechten voor dit kind";customErrorCodes[486]="Je hebt geen rechten voor deze groep";customErrorCodes[485]="De test is niet gevonden";customErrorCodes[384]="De test wordt niet ingevuld voor/door het geselecteerde kind(eren)";customErrorCodes[483]="De gebruiker is niet gevonden";customErrorCodes[379]="Dit bestand staat al op je prikbord";$(document).ajaxComplete(function(n,t){typeof url_SessionTimeout!="undefined"&&url_SessionTimeout&&url_SessionTimeout.length&&t.status===401&&($("body").fadeOut("fast"),location.href=url_SessionTimeout)});$(document).ajaxComplete(function(n,t){t.status===200||t.status===392||t.responseText&&t.responseText.length&&!(t.responseText.indexOf("errorPage")<0)||n&&n.target&&$(n.target).hasClass("talent-form")||showCustomError(t.status)});abortables=[];directionCookie="direction";$(document).ready(function(){$(document).on("mouseup touchend",function(n){var t=$(".bootstrap-datetimepicker-widget");t&&t.length>0&&!t.is(n.target)&&t.has(n.target).length===0&&t.siblings("input").datetimepicker("hide")});$("body").keyup(function(n){n.which===27&&(n.preventDefault(),closePopup(),$(".bs-container.dropdown.bootstrap-select").remove())});$("body").on("hidden.bs.modal",function(){$(".bs-container.dropdown.open").remove();$(".bs-container.dropdown.show").remove()});try{$(".dropdown-toggle").dropdown();initTooltips()}catch(n){}$("img.preview").bind("load",function(){$(this).css("background","transparent")});checkPosters();$("#spinner").fadeOut(10);$(".content-loading").fadeIn(20);isTouch()&&$("body").css("cursor","pointer");$(".app .height-100")&&$(".app .height-100").length&&PullToRefresh.init({mainElement:".app .height-100",onRefresh:function(){$(".app .height-100").html('<span class="loading"><\/span>');window.location.reload()},instructionsPullToRefresh:"Swipe om te vernieuwen",instructionsReleaseToRefresh:"Laat los om te vernieuwen",instructionsRefreshing:"Vernieuwen",shouldPullToRefresh:function(){return!window.scrollY&&!$("body").hasClass("popup-show")&&!document.querySelector("body").scrollTop}});loadAsync(".picker div[data-load-url], .student-profile-nav div[data-load-url]");$(document).on("focus","input[type=range]",function(){$(this).on("wheel.disableScroll",function(n){n.preventDefault()})});$(document).on("blur","input[type=range]",function(){$(this).off("wheel.disableScroll")})});$.ajaxSetup({cache:!1});$(document).ajaxSend(function(n,t,i){try{i.url.indexOf("/Student/")<0&&abortables.push(t)}catch(r){}});jQuery.expr[":"].parents=function(n,t,i){return jQuery(n).parents(i[3]).length<1};